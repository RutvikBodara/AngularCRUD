<ng-container *ngIf="paginatorLength != 0; else nofound">
  <table
    mat-table
    [dataSource]="data"
    matSort
    class="shadow"
    (matSortChange)="announceSortChange($event)"
    multiTemplateDataRows
  >
    <ng-container
      *ngFor="let column of displayedColumns"
      [matColumnDef]="column"
    >
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        <ng-container
          *ngIf="column != 'action' || (column == 'action' && actionBtnAllowed)"
        >
          {{ column }}
        </ng-container>
      </th>
      <td mat-cell *matCellDef="let element">
        <ng-container *ngIf="column != 'action'; else edbtns" class="m-3">
          <ng-container *ngIf="isDateColumn(column)">
            {{
              element[column] ? (element[column] | date : "d MMMM yyyy") : "-"
            }}
          </ng-container>
          <ng-container *ngIf="!isDateColumn(column)">
            {{ element[column] ? element[column] : "-" }}
          </ng-container>
        </ng-container>
        <ng-template #edbtns>
          <ng-container *ngIf="actionBtnAllowed" class="m-3">
            <div class="d-flex gap-2 p-3">
              <svg
                (click)="onEditButtonClick(element)"
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-pencil-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"
                />
              </svg>

              <svg
                (click)="onDeleteButtonClick(element.id)"
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-trash3"
                viewBox="0 0 16 16"
              >
                <path
                  d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"
                />
              </svg>
            </div>
          </ng-container>
        </ng-template>
      </td>
    </ng-container>

    <!-- expandabel -->
    <ng-container *ngIf="expandableGrid">
      <ng-container matColumnDef="expandedDetail">
        <td
          mat-cell
          *matCellDef="let element; let index = index"
          [attr.colspan]="displayedColumns.length"
        >
          <div
            [@detailExpand]="
              element === expandedElement ? 'expanded' : 'collapsed'
            "
            [ngClass]="{ 'm-3': element === expandedElement }"
          >
            <app-common-table-grid
              [displayedColumns]="childDisplayColumns"
              [data]="childTable"
              [expandableGrid]="false"
              [paginatorLength]="childPaginatorLength"
              [paginationAllowed]="false"
              [actionBtnAllowed]="false"
            ></app-common-table-grid>
          </div>
        </td>
      </ng-container>
    </ng-container>

    <!-- <ng-container *ngIf="expandableGrid">
  <app-common-table-grid [displayedColumns]="displayedColumns" [data]="data" [paginatorLength]=" paginatorLength"  [expandableGrid]="false" >
  </app-common-table-grid> -->
    <!-- <ng-container matColumnDef="expandedDetail">
    <td
    mat-cell
    *matCellDef="let element"
    [attr.colspan]="displayedColumns.length"
    >
    <div
    class="example-element-detail"
    [@detailExpand]="
    element == expandedElement ? 'expanded' : 'collapsed'
    "
    >
    <div class="example-element-diagram">
      <mat-grid-list cols="3" rowHeight="10:1">
        <ng-container *ngFor="let column of displayedColumns">
          
          <mat-grid-tile>
            <ng-container *ngIf="column != 'action'">
              <ng-container *ngIf="isDateColumn(column)">
                {{ column }} :
                {{
                  element[column]
                  ? (element[column] | date : "d MMMM yyyy")
                  : "-"
                  }}
                </ng-container>
                <ng-container *ngIf="!isDateColumn(column)">
                  {{ column }} :
                  {{ element[column] ? element[column] : "-" }}
                </ng-container>
              </ng-container>
            </mat-grid-tile>
          </ng-container>
        </mat-grid-list>
      </div>
    </div>
  </td>
</ng-container> -->
    <!-- </ng-container> -->

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      (click)="toggleRow(row)"
    ></tr>
    <ng-container *ngIf="expandableGrid">
      <tr
        mat-row
        *matRowDef="let row; columns: ['expandedDetail']"
        class="expand-row"
      ></tr>
    </ng-container>
  </table>

  <!-- 
  <ng-container *ngIf="expandableGrid">
    <mat-accordion>
      <ng-container *ngFor="let object of data; let index = index">
        <mat-expansion-panel
        [expanded]="currentIndex === index"
        (opened)="setStep(index)"
        >
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ object[displayedColumns[0]] }}
            {{ object[displayedColumns[1]] }}
          </mat-panel-title>
          <mat-panel-description>
            {{ object }}
            <mat-icon>profile</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        
        <ng-container *ngFor="let column of displayedColumns; let index = index">
          
          
        </ng-container>
        <button class="btn btn-primary me-3" matTooltip="edit  list">
          <mat-icon>edit</mat-icon>
          <span>Edit</span>
        </button>
        <button class="btn btn-danger" matTooltip="delete  list">
          <mat-icon>delete</mat-icon>
          <span>Delete</span>
        </button>
        
        <button class="btn btn-danger" matTooltip="delete  list">
          <mat-icon>delete</mat-icon>
          <span>Delete</span>
        </button>
        <button class="btn btn-danger" matTooltip="delete  list">
          <mat-icon>delete</mat-icon>
          <span>Delete</span>
        </button>
        <mat-action-row>
          <button mat-button (click)="prevStep()" [hidden]="index === 0">
            prev
          </button>
          <button
          mat-button
          (click)="nextStep()"
          [hidden]="index === countrow - 1"
          >
          Next
        </button>
      </mat-action-row>
    </mat-expansion-panel>
  </ng-container>
</mat-accordion>
</ng-container> -->

  <ng-container *ngIf="paginationAllowed">
    <mat-paginator
      class="mt-3"
      [length]="paginatorLength"
      [pageSize]="5"
      [pageSizeOptions]="[2, 5, 10, 20]"
      showFirstLastButtons
      aria-label="data from my side"
    >
    </mat-paginator>
  </ng-container>
</ng-container>
<ng-template #nofound>
  <div class="d-flex justify-content-center text-danger h3">No Data Found</div>
</ng-template>
